<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Resultados da Corrida</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1 { color: #333; }
    .piloto { margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; }
    .vencedor { background-color: #e0ffe0; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Resultados da Corrida</h1>
  <div id="lista"></div>

  <script>
    const databaseURL = 'https://cronometregemgps-default-rtdb.firebaseio.com/.json';

    async function carregarDados() {
      const resposta = await fetch(databaseURL);
      const dados = await resposta.json();

      const lista = document.getElementById('lista');
      lista.innerHTML = '';

      const dadosArray = [];

      for (const chave in dados) {
        const item = dados[chave];
        dadosArray.push({
          nome: item.nome || '',
          kart: item.kart || '',
          tempoAtual: item.tempo_atual || '--:--:---',
          melhorVolta: item.melhor_volta || '--:--:---',
          voltas: item.voltas || 0
        });
      }

      // Ordena pela melhor volta (alfab√©tica por enquanto, depois podemos converter para tempo real)
      dadosArray.sort((a, b) => a.melhorVolta.localeCompare(b.melhorVolta));

      dadosArray.forEach((dado, index) => {
        const div = document.createElement('div');
        div.className = 'piloto' + (index === 0 ? ' vencedor' : '');
        div.innerHTML = `
          <h3>${index === 0 ? 'üèÜ ' : ''}${dado.nome} (Kart ${dado.kart})</h3>
          <p><strong>Melhor volta:</strong> ${dado.melhorVolta}</p>
          <p><strong>Tempo atual:</strong> ${dado.tempoAtual}</p>
          <p><strong>Total de voltas:</strong> ${dado.voltas}</p>
        `;
        lista.appendChild(div);
      });
    }

    setInterval(carregarDados, 3000); // Atualiza a cada 3 segundos
  </script>
</body>
</html>
